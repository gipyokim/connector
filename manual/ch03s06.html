<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><title>6. MongoDB 덤프</title><link href="webhelp.css" rel="stylesheet" type="text/css" /><meta content="DocBook XSL Stylesheets V1.79.1" name="generator" /><link href="index.html" rel="home" title="KONAN Connector V2.1" /><link href="cnt_setting.html" rel="up" title="3장. 작업 설정" /><link href="ch03s05.html" rel="prev" title="5. 재처리" /><link href="mongodb_hvm.html" rel="next" title="6.1. High Value Mark (MongoDB, HVM)" /><link href="_wh/jquery-ui.css" rel="stylesheet" type="text/css" /><link href="_wh/wh.css" rel="stylesheet" type="text/css" /><script src="_wh/jquery.min.js" type="text/javascript">
    </script><script src="_wh/jquery-ui.min.js" type="text/javascript">
    </script><script charset="UTF-8" src="_wh/wh.min.js" type="text/javascript">
    </script><script charset="UTF-8" src="_wh/search.js" type="text/javascript">
    </script><link href="_wh/user/header_footer.css" rel="stylesheet" type="text/css" /></head><body>
    <div id="wh-header">
    
  
  
	 <table id="page-header" style="border-spacing: 0; width: 100%; height:63px; background-color:#EDEDED; border-bottom:2px solid #dddddd;">
      <tr>
        <td style="vertical-align: middle; width: 280px; ">
		
		</td>

        <td style="vertical-align: middle;"><h1 id="page-header-title">커넥터 사용자 설명서</h1></td>

        <td style="vertical-align: middle; width: 110px;"> </td>
      </tr>
    </table>

	
</div>

    <div id="wh-body">
      <div id="wh-navigation">
        <ul id="wh-tabs">
          <li id="wh-toc-tab"><a href="#wh-toc-pane"><span>Contents</span></a></li>
          
          <li id="wh-search-tab"><a href="#wh-search-pane"><span>Search</span></a></li>
        </ul>
        <div id="wh-toc-pane">
          <div id="wh-toc-form">
            <span id="wh-toc-control"><a href="#">Collapse 
            All</a><a href="#">Expand All</a></span>
            <button id="wh-toc-previous">Previous</button>
            <button id="wh-toc-next">Next</button>
            <button id="wh-toc-print">Print</button>
          </div>
          <script charset="UTF-8" src="_wh/toc.js" type="text/javascript">
          </script>
        </div>
        
        <div id="wh-search-pane">
          <div id="wh-search-form">
            <input id="wh-search-field" type="text" /><button id="wh-search-button">Search</button><span id="wh-highlight-group"><input checked="checked" id="wh-highlight-toggle" type="checkbox" /><label for="wh-highlight-toggle">Toggle Highlight</label></span>
          </div>
          <div id="wh-search-results">
          </div>
        </div>
      </div>
      <div id="wh-separator">
      </div>
      <div id="wh-content">
      <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e1500"></a>6. MongoDB 덤프</h2></div></div></div><p>다음 옵션들은 MongoDB 덤프에 사용하는 설정이다.</p><div class="informaltable"><table border="1" class="informaltable"><colgroup><col align="left" width="34%" /><col width="66%" /></colgroup><thead><tr><th align="center">옵션</th><th align="center">설명</th></tr></thead><tbody><tr><td align="left"><a id="data_source.cx97d"></a><p><a id="data_source_desc"></a>mongo_source (필수)</p></td><td align="left"><p>MongoDB 데이터 소스</p><pre class="programlisting">mongo_source mongoDataSource = {
  url = mongodb://localhost:27017/sample
  user = user
  password = user
}</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>MongoDB에 접속하기 위한 URL 설정으로 <span class="bold"><strong>&quot;mongodb://[host]:[port]/[db]&quot;</strong></span> 형태로 작성한다. ([db]의 경우, 사용자 권한에 따라 생략 가능)</p></li><li class="listitem"><p>USER, PASSWORD : 사용자 인증이 필요한 경우에 설정한다.</p></li></ul></div><p>아래와 같이 url, user, password를 한줄로 작성할 수도 있다.</p><pre class="programlisting">mongo_source mongoDataSource = {
 url = mongodb://user:password@localhost:27017/sample
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">참고</h3><p>설치가 완료되면 <span class="boldbgyellow">lib 디렉터리</span>에 MongoDB Java driver (mongo-java-driver-3.0.2.jar)가 함께 설치된다.</p></div></td></tr><tr><td align="left"><p>query (필수)</p></td><td align="left"><p>덤프 시 사용할 메인 쿼리</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">참고</h3><p>collection 조회 조건을 &quot;<span class="bold"><strong>[database].[collection]{[query]}</strong></span>&quot; 형태로 작성한다. query는 BSON(binary JSON)의 형태로 작성한다.</p><p>쿼리에 대한 자세한 설명은 <a class="link" href="mongo_tutorial.html" title="부록 E. MongoDB 튜토리얼">&quot;MongoDB 튜토리얼&quot;</a>을 참고한다.</p></div></td></tr><tr><td align="left"><p>fetch_size</p></td><td align="left"><p>패치 레코드 개수 (기본값:128)</p></td></tr><tr><td align="left"><p>field_mapping (필수)</p></td><td align="left"><p><a class="link" href="DataMapping.html" title="4장. 필드 매핑">&quot;필드 매핑&quot;</a>을 참고한다. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">참고</h3><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>예외값 : 공백</p></li></ul></div></div></td></tr><tr><td align="left"><p>inc_strategy</p></td><td align="left"><p>증분 덤프 시 사용할 방법 (기본값 : off)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>off : 증분 덤프를 사용하지 않는다.</p></li><li class="listitem"><p>hvm : High Value Mark 방식</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">작은 정보</h3><p>hvm에 사용되는 옵션</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>hvm_column (필수)</p></li><li class="listitem"><p>hvm_add_condition</p></li><li class="listitem"><p>hvm_iud_method</p></li></ul></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">참고</h3><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>mongoDB의 증분 덤프는 HVM 방식만 지원된다.</p></li><li class="listitem"><p><a class="link" href="mongodb_hvm.html" title="6.1. High Value Mark (MongoDB, HVM)">&quot;High Value Mark (MongoDB, HVM)&quot;</a>를 참고한다.</p></li></ul></div></div></li></ul></div></td></tr><tr><td align="left"><p>inc_thread_count</p></td><td align="left"><p>증분 덤프 시 작업 스레드 개수 (기본값 : thread_count 값)</p></td></tr><tr><td align="left"><p>hvm_column</p><p>(inc_strategy = hvm 설정 시, 필수)</p></td><td align="left"><p>High Value Mark 증분 덤프 시 기준 칼럼명 (HVM 사용할 경우, 필수)</p></td></tr><tr><td align="left"><p>hvm_add_condition</p><p>(inc_strategy = hvm 설정 시, 옵션)</p></td><td align="left"><p>High Value Mark 증분 덤프 시 메인 쿼리에 추가되는 문장 (HVM 사용할 경우, 선택)</p><pre class="programlisting">hvm_add_condition = {'date':{'$gt':{'$date':&quot;#last_hvm#&quot;}}}</pre><p>hvm_add_condition을 설정하지 않은 경우는 String 형태로 정규화된 쿼리가 실행된다. 따라서, String 형태 외의 조건이 필요한 경우는 본 옵션을 사용해야 한다.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">참고</h3><p>(last_hvm) 값은 data 디렉터리에 생성되는 <span class="bold"><strong>작업명.status</strong></span> 파일에서 확인할 수 있다.</p></div></td></tr><tr><td align="left"><p>hvm_iud_method</p><p>(inc_strategy = hvm 설정 시, 옵션)</p></td><td align="left"><p>High Value Mark 증분 덤프 시 I(nsert), U(pdate), D(elete) 결정 메소드</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>생략 시 I(insert)로 결정</p></li></ul></div><pre class="programlisting">hvm_iud_method = 
SampleGroovy.decision_IUD
(&quot;@created_date@&quot;, &quot;@modified_date@&quot;, &quot;@del_yn@&quot;)</pre></td></tr></tbody></table></div></div></div>
    </div>

    <div id="wh-footer">
    <p id="page-footer" style="font-family: 'Malgun Gothic',Helvetica,Arial,sans-serif;font-size: 12px; margin-top: 20px;">Copyright <span style="color: #FF8526;">Konan Technology</span> Inc. All Rights Reserved.</p></div>
  </body></html>